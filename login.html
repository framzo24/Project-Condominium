<!DOCTYPE html>
<html>

<head>
    <title>Pagina di Login</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-color: rgb(116, 116, 116);
        }

        header {
            background-color: rgb(51, 51, 51);
            color: white;
            height: 45px;
            padding: 20px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
        }

        footer {
            background-color: rgb(51, 51, 51);
            color: white;
            height: 20px;
            position: fixed;
            padding: 10px;
            bottom: 0;
            width: 100%;
            text-align: center;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.5);
        }

        .container {
            margin: 20px;
            padding: 20px;
            background-color: white;
            box-shadow: 0px 0px 0px rgb(101, 101, 101, 0.5);
            width: 400px;
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .container input[type="text"],
        .container input[type="password"] {
            width: -webkit-fill-available;
            padding: 10px;
            margin-top: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .container input[type="submit"] {
            width: 100%;
            padding: 10px;
            background-color: green;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <header>
        <h1>Login del nostro bellissimo sito</h1>
    </header>

    <div class="container">
        <form id="loginForm" method="post" action="/login">
            <input type="text" placeholder="Email" name="email" required>
            <input type="password" placeholder="Password" name="password" required>
            <input type="submit" value="Accedi">
        </form>

        <a href="/home">Torna alla home</a><br>
        <a href="/registration">Voglio registrarmi</a>
    </div>

    <footer>
        <p>Vuoi delle info in pi√π? Vattele a pigliare</p>
    </footer>

</body>
    <script>
        // Funzione per mostrare i campi "Utente" e nascondere i campi "Amministratore"
        function showUtenteFields() {
            document.getElementById("utenteFields").style.display = "block";
            document.getElementById("amministratoreFields").style.display = "none";
        }

        // Funzione per mostrare i campi "Amministratore" e nascondere i campi "Utente"
        function showAmministratoreFields() {
            document.getElementById("amministratoreFields").style.display = "block";
            document.getElementById("utenteFields").style.display = "none";
        }

        document.getElementById("loginForm").addEventListener("submit", function (event) {
            event.preventDefault(); // Evita l'invio del modulo
            var email = document.querySelector('input[name="email"]').value;
            var password = document.querySelector('input[name="password"]').value;

            // Esegui la richiesta di login al server (posta i dati)
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email: email, password: password })
            })
                .then(userData => {
                    // Salva i dati dell'utente nella sessionStorage
                    sessionStorage.setItem("userId", userData.id);
                    sessionStorage.setItem("nome", userData.nome);
                    sessionStorage.setItem("cognome", userData.cognome);
                    sessionStorage.setItem("email", userData.email);
                    sessionStorage.setItem("p_iva", userData.p_iva);
                    sessionStorage.setItem("ruolo", userData.ruolo);

                    // Altri passaggi come reindirizzamento o aggiornamento dell'interfaccia utente
                })
                .catch(error => {
                    console.error('Errore durante la richiesta di login:', error);
                });
        });

    </script>

</html>